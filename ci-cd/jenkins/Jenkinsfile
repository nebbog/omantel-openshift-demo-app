pipeline {
  agent {
    kubernetes {
      yaml '''
        apiVersion: v1
        kind: Pod
        spec:
          containers:
          - name: builder
            image: nebbog/builder:1.2.0
            command:
            - cat
            tty: true
            securityContext:
              seccompProfile:
                type: RuntimeDefault
              runAsNonRoot: true
              runAsUser: 1000
              runAsGroup: 1000
        '''
    }
  }
  stages {
 
   stage('Build Java project - demo-app') {
     steps{
       container('builder') {
         script {
           sh 'cd ci-cd;./build.sh'
         }
       }
     }
   }

   
 }
}
